language: node_js
node_js: 13.5.0

os:
  - linux
  - osx
  - windows

dist: trusty

notifications:
  email: false

addons:
  apt:
    packages:
      - rpm

jobs:
  include:
    - os: linux
      stage: Publish
      script:
        - npm run release
    - os: osx
      stage: Publish
      script:
        - du -c -h -d1 ~
        - du -c -h -d1 ~/Library
        - du -c -h -d1 ~/Library/Developer
        - du -c -h -d1 ~/Library/Caches
        - npm run release -- --mac
    - os: windows
      stage: Publish
      script:
        - npm run release -- --win

install:
  - npm install

script:
  - npm run compile