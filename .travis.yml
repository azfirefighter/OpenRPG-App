language: node_js
node_js: 13.5.0

os:
  - linux
  - osx
  - windows

dist: trusty

notifications:
  email: false

addons:
  apt:
    packages:
      - rpm

env:
  global:
    - ELECTRON_CACHE=$HOME/.cache/electron
    - ELECTRON_BUILDER_CACHE=$HOME/.cache/electron-builder

script:
  - npm run compile
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then npm run release; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then npm run release -- --mac; fi
  - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then npm run release -- --win; fi